<!doctype html><html lang=en-gb dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Shout out to Brent Ozar (b|t) for hosting this month&amp;rsquo;s TSQL2sday. Itâ€™s time again for this monthly blog party and he wants to know all about our favourite or least favourite data types. To start with I was having a hard time thinking of a favourite data type. I know I have favourite words (merge and plethora, in case youâ€™re wondering), but it seems a bit wrong to pick favourites here â€“ I mean lots of them are great in their own right."><title>T-SQL Tuesday #136: Blog About Your Favorite Data Type (Or Least Favorite)</title><link rel=canonical href=https://jpomfret.github.io/t-sql-tuesday-#136-blog-about-your-favorite-data-type-or-least-favorite/><link rel=stylesheet href=/scss/style.min.3b122f5b6a7023e613be9affad843eaceacf4a3383edd177ce41e35501998968.css><meta property="og:title" content="T-SQL Tuesday #136: Blog About Your Favorite Data Type (Or Least Favorite)"><meta property="og:description" content="Shout out to Brent Ozar (b|t) for hosting this month&amp;rsquo;s TSQL2sday. Itâ€™s time again for this monthly blog party and he wants to know all about our favourite or least favourite data types. To start with I was having a hard time thinking of a favourite data type. I know I have favourite words (merge and plethora, in case youâ€™re wondering), but it seems a bit wrong to pick favourites here â€“ I mean lots of them are great in their own right."><meta property="og:url" content="https://jpomfret.github.io/t-sql-tuesday-#136-blog-about-your-favorite-data-type-or-least-favorite/"><meta property="og:site_name" content="Jess Pomfret"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="datatypes"><meta property="article:tag" content="t-sql-tuesday"><meta property="article:tag" content="tsql"><meta property="article:tag" content="tsql2sday"><meta property="article:published_time" content="2021-03-09T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-09T00:00:00+00:00"><meta name=twitter:site content="@jpomfret"><meta name=twitter:creator content="@jpomfret"><meta name=twitter:title content="T-SQL Tuesday #136: Blog About Your Favorite Data Type (Or Least Favorite)"><meta name=twitter:description content="Shout out to Brent Ozar (b|t) for hosting this month&amp;rsquo;s TSQL2sday. Itâ€™s time again for this monthly blog party and he wants to know all about our favourite or least favourite data types. To start with I was having a hard time thinking of a favourite data type. I know I have favourite words (merge and plethora, in case youâ€™re wondering), but it seems a bit wrong to pick favourites here â€“ I mean lots of them are great in their own right."><script async src="https://www.googletagmanager.com/gtag/js?id=G-YL15E7BXXF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YL15E7BXXF",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hue9d3f1fdfff07cb5f7aa0c4e4da11a16_12179_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ðŸ¦„</span></figure><div class=site-meta><h1 class=site-name><a href=/>Jess Pomfret</a></h1><h2 class=site-description>Database Engineer with a Passion for Automation</h2></div></header><ol class=menu id=main-menu><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#the-setup>The Setup</a></li><li><a href=#the-comparison>The Comparison</a></li><li><a href=#storage-is-cheap--why-do-i-care><strong>Storage is cheap â€“ why do I care?</strong></a></li><li><a href=#summary>Summary</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/t-sql-tuesday/>t-sql-tuesday</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/t-sql-tuesday-#136-blog-about-your-favorite-data-type-or-least-favorite/>T-SQL Tuesday #136: Blog About Your Favorite Data Type (Or Least Favorite)</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Mar 09, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p><a class=link href=https://www.brentozar.com/archive/2021/03/tsql2sday-136-invitation-blog-about-your-favorite-data-type-or-least-favorite/ target=_blank rel=noopener><img src=/images/tsqltues.png loading=lazy alt="T-SQL Tuesday Logo"></a></p><p>Shout out to Brent Ozar (<a class=link href=http://brentozar.com/ target=_blank rel=noopener>b</a>|<a class=link href=https://twitter.com/BrentO target=_blank rel=noopener>t</a>) for hosting this month&rsquo;s TSQL2sday. Itâ€™s time again for this monthly blog party and he wants to know all about our favourite or least favourite data types. To start with I was having a hard time thinking of a favourite data type. I know I have favourite words (merge and plethora, in case youâ€™re wondering), but it seems a bit wrong to pick favourites here â€“ I mean lots of them are great in their own right. Then it came to me- my favourite data type is the right one for the job at hand. Feels like Iâ€™m skirting the question a little here, but bear with me.</p><p>Letâ€™s talk about accuracy and precision, and how much of it you actually need.Â  The rest of this post is going to focus on datetime datatypes, but these thoughts could easily apply elsewhere (for example tinyint vs int vs bigint).</p><p>First things first, letâ€™s review our options when it comes to storing dates in a SQL Server table. These are the 6 current datatype options for datetime data in SQL Server:</p><p>Letâ€™s talk about accuracy and precision, and how much of it you actually need.Â  The rest of this post is going to focus on datetime datatypes, but these thoughts could easily apply elsewhere (for example tinyint vs int vs bigint).</p><p>First things first, letâ€™s review our options when it comes to storing dates in a SQL Server table. These are the 6 current datatype options for datetime data in SQL Server:</p><div class=table-wrapper><table><thead><tr><th>Datatype</th><th>Accuracy</th><th>Storage Size</th><th>Notes</th></tr></thead><tbody><tr><td>Date</td><td>One day</td><td>3 bytes</td><td>Doesn&rsquo;t include time</td></tr><tr><td>SmallDateTime</td><td>One minute</td><td>4 bytes</td><td></td></tr><tr><td>DateTime</td><td>Rounded to increments of .000, .003, or .007 seconds</td><td>8 bytes</td><td></td></tr><tr><td>DateTime2</td><td>100 nanoseconds</td><td>6 bytes for precision less than 3.</td><td></td></tr><tr><td>7 bytes for precision 3 or 4.</td><td></td><td></td><td></td></tr><tr><td>All other precision require 8 bytes.</td><td></td><td></td><td></td></tr><tr><td>Time</td><td>100 nanoseconds (1 millisecond in Informatica)</td><td>5 bytes</td><td>Doesn&rsquo;t include date</td></tr><tr><td>DateTimeOffset</td><td>100 nanoseconds</td><td>10 bytes</td><td>Includes time zone awareness</td></tr></tbody></table></div><p>This table was created from information on Microsoft Docs, and there is plenty more information if youâ€™re interested: <a class=link href="https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-types-transact-sql?view=sql-server-ver15" target=_blank rel=noopener>Data types (Transact-SQL) - SQL Server | Microsoft Docs</a>.</p><h2 id=the-setup>The Setup</h2><p>For this example, letâ€™s say I have a table that gets loaded by a daily batch job. The column we will discuss needs to store just the date, no time and no need for time zone awareness. This leaves us with 4 options to investigate.</p><p>In order to demonstrate the importance of choosing the right datatype Iâ€™m going to create 4 really simple tables. They will each have one column, with a default value of today&rsquo;s date, and no time information.Â  These tables are totally unrealistic, but it isolates the storage required for a single column and will allow us to focus in on the differences our decision here can cause in a small test case.</p><p>create table dataTypeDate (
batchDate date default (convert(date,getdate()))
)</p><p>create table dataTypeSmallDateTime (
batchSmallDateTime smalldatetime default (convert(date,getdate()))
)</p><p>create table dataTypeDateTime (
batchDateTime datetime default (convert(date,getdate()))
)</p><p>create table dataTypeDateTime2 (
batchDateTime2 datetime2 default (convert(date,getdate()))
)</p><p>Once we have four tables we can run the following to load our batch for the day. To simulate this weâ€™re going to insert the default values, 500,000 times.Â  You can see here Iâ€™m using the <code>GO 500000</code> syntax to run each insert half a million times.</p><p>insert into dataTypeDate
default values;
GO 500000</p><p>insert into dataTypeSmallDateTime
default values;
GO 500000</p><p>insert into dataTypeDateTime
default values;
GO 500000</p><p>insert into dataTypeDateTime2
default values;
GO 500000</p><h2 id=the-comparison>The Comparison</h2><p>First, letâ€™s take a look at the first row in each table so we can see the different accuracies of our columns:</p><p>SELECT TOP 1 batchDate FROM dataTypeDate
SELECT TOP 1 batchSmallDateTime FROM dataTypeSmallDateTime
SELECT TOP 1 batchDateTime FROM dataTypeDateTime
SELECT TOP 1 batchDateTime2 FROM dataTypeDateTime2</p><p><img src=/images/topOneRow.jpg loading=lazy alt="query results from SSMS for select top 1 from each table"></p><p>We have the exact same data in these columns, just a date, no time. However, because of the different datatypes we used when we defined our tables, you can clearly see the different accuracies that were available to us.Â  The requirement for the datatype to be able to meet stricter accuracies is where the additional storage comes in. As you saw in the table above, storing just a date, which is all we need in this situation, will cost us 3 bytes. Any other datatype we choose will add unnecessary storage. While weâ€™re talking bytes, and it doesnâ€™t seem like a big deal for one row with one column, it adds up quickly when weâ€™re talking millions of rows with multiple columns that are inappropriate typed.</p><p>The following query will display some information about our four tables, including the number of 8k pages that each table is using.</p><p>SELECT
schema_name(obj.SCHEMA_ID) as SchemaName,
obj.name as TableName,
ind.type_desc as IndexType,
pas.row_count as NumberOfRows,
pas.used_page_count as UsedPageCount,
(pas.used_page_count * 8)/1024 as SizeUsedMB,
par.data_compression_desc as DataCompression,
(pas.reserved_page_count * 8)/1024 as SizeReservedMB
FROM sys.objects obj
INNER JOIN sys.indexes ind
ON obj.object_id = ind.object_id
INNER JOIN sys.partitions par
ON par.index_id = ind.index_id
AND par.object_id = obj.object_id
INNER JOIN sys.dm_db_partition_stats pas
ON pas.partition_id = par.partition_id
WHERE obj.schema_id &lt;> 4
ORDER BY UsedPageCount desc</p><p><img src=/images/tables-1024x135.jpg loading=lazy alt="results of query to show number of pages used by each table"></p><p>We can see that there are 500,000 rows in each of our tables and even with only one column there is a sizable difference in the number of pages needed if we chose DateTime or DateTime2 over just the Date type. Itâ€™s about a 25% savings- multiply that out by multiple columns across multiple tables and weâ€™re going to start seeing a pretty sizable difference in our storage needs.</p><p>This is still a pretty small dataset, but it does clearly show that there is a significant difference in the amount of storage needed if we choose an unnecessarily accurate datatype for our date values.</p><h2 id=storage-is-cheap--why-do-i-care><strong>Storage is cheap â€“ why do I care?</strong></h2><p>Storage might not be our biggest concern, although enterprise grade storage is not as cheap as the USB drives at the supermarket checkout, but there are several other reasons why this wasted space is a big deal. Hereâ€™s a few:</p><p><strong>Buffer Cache</strong> â€“ When SQL Server needs to interact with our data it first reads it into memory. Wasted space on disk then becomes wasted space in memory. That means we can store less data in the buffer cache and will have to flush out pages more quickly than if they were optimised.</p><p><strong>Backup\restore</strong> â€“ The bigger your database the longer itâ€™s going to take to perform backup and restore activities.</p><p><strong>Transaction log activity</strong> â€“ The bigger the record in SQL Server the more space itâ€™ll need when any operations are written to the transaction log. This means youâ€™ll need more disk space for your transaction log and your t-log backups will be larger. More wasted space.</p><h2 id=summary>Summary</h2><p>So in a truly diplomatic fashion, I rate all the datatypes equally. Weâ€™ve only looked at types specific to datetimes in this post, but each and every datatype is suitable for storing certain data. The most important point is that we make solid decisions on both the type of data we want to store and the accuracy/precision needed to store that data.</p><p>Thanks for reading, and thanks again to Brent for hosting.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/datatypes/>datatypes</a>
<a href=/tags/t-sql-tuesday/>t-sql-tuesday</a>
<a href=/tags/tsql/>tsql</a>
<a href=/tags/tsql2sday/>tsql2sday</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/t-sql-tuesday-#132-how-are-you-coping-with-pandemic/><div class=article-details><h2 class=article-title>T-SQL Tuesday #132: How Are You Coping with Pandemic?</h2></div></a></article><article><a href=/t-sql-tuesday-#143-short-code-examples/><div class=article-details><h2 class=article-title>T-SQL Tuesday #143: Short code examples</h2></div></a></article><article><a href=/t-sql-tuesday-#141-work/life-balance/><div class=article-details><h2 class=article-title>T-SQL Tuesday #141: Work/Life balance</h2></div></a></article><article><a href=/t-sql-tuesday-#135-the-outstanding-tools-of-the-trade-that-make-your-job-awesome/><div class=article-details><h2 class=article-title>T-SQL Tuesday #135: The outstanding tools of the trade that make your job awesome</h2></div></a></article><article><a href=/t-sql-tuesday-#134-give-me-a-break/><div class=article-details><h2 class=article-title>T-SQL Tuesday #134 - Give me a break</h2></div></a></article></div></div></aside><div class=disqus-container></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2022 Jess Pomfret</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.15.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>